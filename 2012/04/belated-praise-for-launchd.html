<!doctype html>
<!--[if lt IE 7]> <html class="no-js lt-ie9 lt-ie8 lt-ie7" lang="en"> <![endif]-->
<!--[if IE 7]>    <html class="no-js lt-ie9 lt-ie8" lang="en"> <![endif]-->
<!--[if IE 8]>    <html class="no-js lt-ie9" lang="en"> <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en"> <!--<![endif]-->
<head>
  
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
  <meta name="description" content="">
  <meta name="viewport" content="width=device-width">
  <link href='http://fonts.googleapis.com/css?family=Quicksand|Maven+Pro' rel='stylesheet' type='text/css'>
  <link rel="stylesheet" href="/css/style.css">
  <link rel="alternate" type="application/atom+xml" title="danger, inc feed" href="/feeds/blog.xml" />
  <title>danger, inc - Belated Praise for Launchd</title>
  <script src="/js/libs/modernizr-2.5.3.min.js"></script>
  
</head>
<body>
  <!-- Prompt IE 6 users to install Chrome Frame. Remove this if you support IE 6.
       chromium.org/developers/how-tos/chrome-frame-getting-started -->
  <!--[if lt IE 7]><p class=chromeframe>Your browser is <em>ancient!</em> <a href="http://browsehappy.com/">Upgrade to a different browser</a> or <a href="http://www.google.com/chromeframe/?redirect=true">install Google Chrome Frame</a> to experience this site.</p><![endif]-->
  <div id="page">
    <header id="header">
      
        <hgroup id="title-wrapper">
          <h1 id="title"><a href="/">danger, inc</a></h1>
          <hr/>
          <h2 id="subtitle">...not really incorporated</h2>
        </hgroup>
      
    </header>
    <div id="main-wrapper">
      
      <div id="leftcol">
        
          <nav id="main-nav"><a
            id="main-nav-1" href="/">Home</a><a
            id="main-nav-2" href="/archives.html">Archives</a><a
            id="main-nav-3" href="/about.html">About</a></nav>
        
      </div>
      <div id="content-wrapper">
        
    
    

<article class="article blogpost">
  <header>
    
    <h1><a href="/2012/04/belated-praise-for-launchd.html">Belated Praise for Launchd</a></h1>
    
  </header>
  <p>This is way behind the times, but I recently had to automate a task on Mac OS X, and decided to deploy it using <code>launchd</code> instead of <code>cron</code>. I expected to find it an XML-enabled <code>cron</code> clone, or worse. I was happily very wrong.</p>
<h1>The Good</h1>
<p>The first surprise was a set of relatively good man pages. They don't contain every single detail, but some experimentation and some <a href="http://stackexchange.com/">stack exchange</a> got the job done.</p>
<p><code>Launchd</code> improves on <code>cron</code> for deployment: one file per job is an improvement over the <code>crontab</code>. I have implemented a similar system over <code>cron</code> before, where you drop individual <code>crontab</code>-formatted files into a directory, and they're all picked up and added into the user's <code>crontab</code> file. It's nice to get that for free with <code>launchd</code>.</p>
<p>Apple also implemented far more event triggers than <code>cron</code>, which only implements a clock. <code>Launchd</code> replaces <code>crond</code>, <code>inetd</code>, and most importantly to me, filesystem event triggers.</p>
<p>There are also configuration elements for a few practices that were commonly done in code. For example, <code>stdout</code> and <code>stderr</code> redirection to a file, so you don't have to do that sort of magic in your program. You can configure the working directory or <code>chroot</code> of your program instead of being dumped into <code>/</code>, which is nice. And, if it's running under the system, you can configure the user and group that the program should use.</p>
<p>All this means that one can write a very simple bash script instead of a cron-specific, boilerplate-filled mess. It's easy to make it so the script can be run interactively when needed, without adding too many options.</p>
<h1>The Bad</h1>
<p>Mac OS X's default configuration file format is the plist. It's XML and it takes a good long time to say anything. I'm not crazy about it, compared with formats that are friendlier to type. Grudgingly I'll admit it's not too painful to use XCode to make them, since you don't have to remember the boilerplate or schema.</p>
<h1>The Ugly?</h1>
<p>I don't have enough experience yet with it to have anything ugly to report. It's quite possible I'll never get enough experience with it, as I expect to write more code for servers than clients, and I historically have preferred non-Darwin unixes for server duties.</p>
<p>But I can say that I will miss some of the flexibility of <code>launchd</code> the next time I find myself using <code>cron</code> to schedule a job when I really want a filesystem-based trigger.</p>
  <div class="taglist">mac, dev</div>
  <footer>
    
    Posted
     by Steve 
     on 2012-04-30 20:20:00
    
  </footer>
</article>



      </div>
      <div id="rightcol">
        
    
    

  
  
    
      
        
          
            
            <div class="supplements">
              <nav class="archives related">
                <h1>Related Posts</h1>
                <ul>
            
            
                <li><a class="archivelink" href="/2011/02/navigating-the-app-store.html">Navigating the App Store</a></li>
            
            
          
        
      
    
      
        
          
            
                <li><a class="archivelink" href="/2011/04/the-mac-app-store.html">The (Mac) App Store</a></li>
            
            
          
        
      
    
      
        
          
            
                <li><a class="archivelink" href="/2011/08/lions-legacy-sandboxing.html">Lion's Legacy: Sandboxing</a></li>
            
            
          
        
      
    
      
        
          
            
                <li><a class="archivelink" href="/2011/10/unix-without-a-filesystem.html">Unix Without A Filesystem</a></li>
            
            
          
        
      
    
      
        
          
            
                <li><a class="archivelink" href="/2012/02/why-annual-osx-releases-are-important.html">Why Annual OS X Releases Are Important</a></li>
            
            
          
        
      
    
      
        
          
            
                <li><a class="archivelink" href="/2012/03/hacking-away-at-wimp.html">Hacking Away At WIMP</a></li>
            
            
          
        
      
    
      
        
          
            
                <li><a class="archivelink" href="/2012/03/why-add-a-printer-at-all.html">Why Add A Printer At All</a></li>
            
            
          
        
      
    
      
        
      
    
    
  
    
      
        
          
            
                <li><a class="archivelink" href="/2011/03/pairing-up-for-design.html">Pairing Up For Design</a></li>
            
            
          
        
      
    
      
        
          
            
                <li><a class="archivelink" href="/2011/05/out-of-scope.html">Out Of Scope</a></li>
            
            
          
        
      
    
      
        
      
    
      
        
          
            
                <li><a class="archivelink" href="/2012/05/first-order-management.html">First-Order Management</a></li>
            
            
          
        
      
    
    
          </ul>
        </nav>
      </div>
    
  

    <div class="supplements"</a>
      <nav class="archives">
  <header><h1>Blog Archives</h1></header>
  <a class="archivelink" href="/archives.html">All Posts</a>
  <ul>
  
    
    
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
      <li><a class="archivelink" href="/archives.html#2012/05">May 2012
        (2)
      </a></li>
      
    
    
    
  
    
    
    
  
    
    
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
      <li><a class="archivelink" href="/archives.html#2012/04">April 2012
        (2)
      </a></li>
      
    
      
    
    
    
  
    
    
    
  
    
    
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
      <li><a class="archivelink" href="/archives.html#2012/03">March 2012
        (2)
      </a></li>
      
    
      
    
      
    
    
    
  
    
    
    
  
    
    
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
      <li><a class="archivelink" href="/archives.html#2012/02">February 2012
        (1)
      </a></li>
      
    
      
    
      
    
      
    
    
    
  
    
    
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
      <li><a class="archivelink" href="/archives.html#2012/01">January 2012
        (2)
      </a></li>
      
    
      
    
      
    
      
    
      
    
    
    
  
    
    
    
  
    
    
    
      
    
      
    
      
    
      
    
      
    
      
    
      
      <li><a class="archivelink" href="/archives.html#2011/10">October 2011
        (2)
      </a></li>
      
    
      
    
      
    
      
    
      
    
      
    
    
    
  
    
    
    
  
    
    
    
      
    
      
    
      
    
      
    
      
    
      
      <li><a class="archivelink" href="/archives.html#2011/08">August 2011
        (1)
      </a></li>
      
    
      
    
      
    
      
    
      
    
      
    
      
    
    
    
  
    
    
    
      
    
      
    
      
    
      
    
      
      <li><a class="archivelink" href="/archives.html#2011/06">June 2011
        (2)
      </a></li>
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
    
    
  
    
    
    
  
    
    
    
      
    
      
    
      
    
      
      <li><a class="archivelink" href="/archives.html#2011/05">May 2011
        (2)
      </a></li>
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
    
    
  
    
    
    
  
    
    
    
      
    
      
    
      
      <li><a class="archivelink" href="/archives.html#2011/04">April 2011
        (4)
      </a></li>
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
    
    
  
    
    
    
  
    
    
    
  
    
    
    
  
    
    
    
      
    
      
      <li><a class="archivelink" href="/archives.html#2011/03">March 2011
        (3)
      </a></li>
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
    
    
  
    
    
    
  
    
    
    
  
    
    
    
      
      <li><a class="archivelink" href="/archives.html#2011/02">February 2011
        (1)
      </a></li>
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
    
    
  
  </ul>
</nav>

    </div>
    <div class="supplements">
      <section>
        <header><h1>Links</h1></header>
        <a href="/feeds/blog.xml">Atom Feed</a>
      </section>
    </div>

      </div>
      
    </div>
    <footer id="footer">
      
      Copyright &copy; 2012 Steven Smolinski.
      
    </footer>
  </div>
  <!-- JavaScript at the bottom for fast page loading -->

  <!-- Grab Google CDN's jQuery, with a protocol relative URL; fall back to local if offline -->
  <script src="//ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="/js/libs/jquery-1.7.1.min.js"><\/script>')</script>

  <script src="/js/plugins.js"></script>
  <script src="/js/script.js"></script>

  <script>
    var _gaq=[['_setAccount','UA-30918530-1'],['_trackPageview']];
    (function(d,t){var g=d.createElement(t),s=d.getElementsByTagName(t)[0];
    g.src=('https:'==location.protocol?'//ssl':'//www')+'.google-analytics.com/ga.js';
    s.parentNode.insertBefore(g,s)}(document,'script'));
  </script>
</body>
</html>
